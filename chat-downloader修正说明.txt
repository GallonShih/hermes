================================================================================
Chat-Downloader YouTube é”™è¯¯ä¿®æ­£è¯´æ˜
================================================================================
æ›´æ–°æ—¥æœŸï¼š2025-12-27
é€‚ç”¨ç‰ˆæœ¬ï¼šchat-downloader 0.2.8
ä¿®æ­£æ¥æºï¼šIndigo128/chat-downloader fork

================================================================================
ã€é—®é¢˜æè¿°ã€‘
================================================================================

æ‰§è¡Œå‘½ä»¤æ—¶å‡ºç°é”™è¯¯ï¼š
  $ chat_downloader https://www.youtube.com/watch?v=VIDEO_ID

é”™è¯¯ä¿¡æ¯ï¼š
  [ERROR] Unable to parse initial video data.
  Please report this at https://github.com/xenova/chat-downloader/issues/new/choose

ç—‡çŠ¶ï¼š
  - 2025å¹´10æœˆä¸­æ—¬åå¼€å§‹å‡ºç°
  - å½±å“æ‰€æœ‰ YouTube è§†é¢‘å’Œç›´æ’­çš„èŠå¤©è®°å½•ä¸‹è½½
  - åŸç‰ˆ xenova/chat-downloader (v0.2.8) æ— æ³•æ­£å¸¸å·¥ä½œ


================================================================================
ã€åŸå› åˆ†æã€‘
================================================================================

æ ¹æœ¬åŸå› ï¼š
  YouTube åœ¨ 2025å¹´10æœˆä¸­æ—¬æ›´æ”¹äº† API æ•°æ®ç»“æ„ï¼Œç‰¹åˆ«æ˜¯ continuation token
  çš„æå–æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚

æŠ€æœ¯ç»†èŠ‚ï¼š
  åŸç‰ˆä»£ç æ— æ³•ä»æ–°çš„æ•°æ®ç»“æ„ä¸­æå– continuation tokenï¼Œå¯¼è‡´ï¼š
  - æ— æ³•è§£æåˆå§‹è§†é¢‘æ•°æ®
  - æ— æ³•è·å– live chat å’Œ chat replay çš„ continuation ä¿¡æ¯
  - æ•´ä¸ªä¸‹è½½æµç¨‹å¤±è´¥

å—å½±å“çš„æ–‡ä»¶ï¼š
  chat_downloader/sites/youtube.py

ç›¸å…³ Issuesï¼š
  - Issue #284 (2025/11/22): Unable to parse initial video data
  - Issue #282 (2025/11/08): æ— æ³•è§£æè§†é¢‘æ•°æ®
  - Issue #281 (2025/11/06): Live/unlisted streams å¤±è´¥
  - Issue #271 (2025/10/19): YouTube chat replay ä¸å†å·¥ä½œ


================================================================================
ã€ä¿®æ­£æ–¹æ¡ˆã€‘
================================================================================

ä¿®æ­£æ¥æºï¼š
  Fork: https://github.com/Indigo128/chat-downloader
  Commit: 3e1400c (2025/12/23)
  ä¿®æ”¹æ–‡ä»¶: youtube.py (+33 lines)

ä¿®æ­£å†…å®¹ï¼š
  1. æ›´æ–° continuation token æå–é€»è¾‘
  2. æ”¯æŒæ–°çš„æ•°æ®ç»“æ„è·¯å¾„ï¼š
     yt_initial_data['contents']['twoColumnWatchNextResults']
       ['conversationBar']['liveChatRenderer']['continuations'][0]
       ['reloadContinuationData']['continuation']

  3. åˆ†åˆ«å¤„ç† live chat å’Œ chat replay
  4. æ·»åŠ é”™è¯¯å¤„ç†ä»¥ä¿æŒå‘åå…¼å®¹


================================================================================
ã€å®‰è£…æ­¥éª¤ã€‘
================================================================================

æ–¹æ³•ä¸€ï¼šä» Fork ç›´æ¥å®‰è£…ï¼ˆæ¨èï¼‰
----------------------------------------

1. å¸è½½æ—§ç‰ˆæœ¬ï¼š
   $ pip uninstall chat-downloader -y

2. ä» fork å®‰è£…ä¿®å¤ç‰ˆæœ¬ï¼š
   $ pip install git+https://github.com/Indigo128/chat-downloader.git

3. éªŒè¯å®‰è£…ï¼š
   $ pip show chat-downloader
   $ chat_downloader --help


æ–¹æ³•äºŒï¼šåˆ‡æ¢å›åŸç‰ˆï¼ˆå¦‚æœæœªæ¥å®˜æ–¹ä¿®å¤ï¼‰
----------------------------------------

å¦‚æœåŸç‰ˆé¡¹ç›®å‘å¸ƒä¿®å¤ç‰ˆæœ¬ï¼Œå¯ä»¥åˆ‡æ¢å›å»ï¼š

1. å¸è½½ fork ç‰ˆæœ¬ï¼š
   $ pip uninstall chat-downloader -y

2. å®‰è£…å®˜æ–¹ç‰ˆæœ¬ï¼š
   $ pip install chat-downloader


================================================================================
ã€ä½¿ç”¨æ–¹æ³•ã€‘
================================================================================

åŸºæœ¬ç”¨æ³•ï¼š
----------------------------------------

ä¸‹è½½èŠå¤©è®°å½•åˆ° JSON æ–‡ä»¶ï¼š
  $ chat_downloader "https://www.youtube.com/watch?v=VIDEO_ID" --output chat.json

é™åˆ¶ä¸‹è½½æ¶ˆæ¯æ•°é‡ï¼š
  $ chat_downloader "URL" --output chat.json --max_messages 100

åªè·å–å®æ—¶èŠå¤©ï¼ˆæ’é™¤é‡æ’­ï¼‰ï¼š
  $ chat_downloader "URL" --output chat.json --message_types live

æŸ¥çœ‹å®Œæ•´å‚æ•°è¯´æ˜ï¼š
  $ chat_downloader --help


å¸¸ç”¨å‚æ•°ï¼š
----------------------------------------

--output FILE, -o FILE
  è¾“å‡ºæ–‡ä»¶è·¯å¾„ï¼ˆJSONæ ¼å¼ï¼‰

--max_messages N
  æœ€å¤§ä¸‹è½½æ¶ˆæ¯æ•°é‡

--message_types TYPE
  æ¶ˆæ¯ç±»å‹ï¼šlive, top, allï¼ˆé»˜è®¤allï¼‰

--start_time TIME
  å¼€å§‹æ—¶é—´ï¼ˆç”¨äºé‡æ’­ï¼‰

--end_time TIME
  ç»“æŸæ—¶é—´ï¼ˆç”¨äºé‡æ’­ï¼‰


Python è„šæœ¬ä½¿ç”¨ç¤ºä¾‹ï¼š
----------------------------------------

from chat_downloader import ChatDownloader

url = 'https://www.youtube.com/watch?v=VIDEO_ID'
chat = ChatDownloader().get_chat(url)

for message in chat:
    print(f"{message['author']['name']}: {message['message']}")


================================================================================
ã€æµ‹è¯•éªŒè¯ã€‘
================================================================================

æµ‹è¯•ç”¨ä¾‹ï¼š
  è§†é¢‘ï¼šhttps://www.youtube.com/watch?v=jfKfPfyJRdk
  ï¼ˆlofi hip hop radio - 24/7 ç›´æ’­ï¼‰

æµ‹è¯•å‘½ä»¤ï¼š
  $ chat_downloader "https://www.youtube.com/watch?v=jfKfPfyJRdk" \
    --output test_output.json --max_messages 10

é¢„æœŸç»“æœï¼š
  âœ… æˆåŠŸä¸‹è½½èŠå¤©è®°å½•
  âœ… è¾“å‡º JSON æ–‡ä»¶åŒ…å«æ¶ˆæ¯æ•°æ®
  âœ… æ—  "Unable to parse initial video data" é”™è¯¯

å®é™…ç»“æœï¼ˆ2025-12-27 æµ‹è¯•ï¼‰ï¼š
  [INFO] Site: youtube.com
  [INFO] Retrieving chat for "lofi hip hop radio ğŸ“š beats to relax/study to".
  2025-12-27 15:18:10 | @watchmesipping: Stop pretending
  2025-12-27 15:18:13 | @Advik3012: but in real mein bohtt baatuni hu...
  [INFO] Finished retrieving chat messages.

  âœ… æµ‹è¯•é€šè¿‡


================================================================================
ã€ç¯å¢ƒä¿¡æ¯ã€‘
================================================================================

å½“å‰ç¯å¢ƒï¼š
  Python: 3.12.4
  è™šæ‹Ÿç¯å¢ƒ: /Users/gallon/Documents/chat-downloader/chat-downloader
  chat-downloader: 0.2.8 (from Indigo128 fork)

ä¸»è¦ä¾èµ–ï¼š
  - requests
  - isodate
  - docstring-parser
  - colorlog
  - websocket-client


================================================================================
ã€ç›¸å…³é“¾æ¥ã€‘
================================================================================

åŸé¡¹ç›®ï¼ˆå®˜æ–¹ï¼‰ï¼š
  https://github.com/xenova/chat-downloader

ä¿®å¤ Forkï¼š
  https://github.com/Indigo128/chat-downloader

ä¿®å¤ Commitï¼š
  https://github.com/Indigo128/chat-downloader/commit/3e1400c

ç›¸å…³ Issuesï¼š
  https://github.com/xenova/chat-downloader/issues/284
  https://github.com/xenova/chat-downloader/issues/271


================================================================================
ã€æ•…éšœæ’é™¤ã€‘
================================================================================

é—®é¢˜1ï¼šå®‰è£…æ—¶æç¤º git å‘½ä»¤æ‰¾ä¸åˆ°
è§£å†³æ–¹æ¡ˆï¼š
  å®‰è£… Git: https://git-scm.com/downloads
  æˆ–ä½¿ç”¨ Homebrew: brew install git

é—®é¢˜2ï¼šä»ç„¶å‡ºç° "Unable to parse initial video data" é”™è¯¯
è§£å†³æ–¹æ¡ˆï¼š
  1. ç¡®è®¤å·²å®Œå…¨å¸è½½æ—§ç‰ˆæœ¬
  2. é‡æ–°å®‰è£… fork ç‰ˆæœ¬
  3. æ£€æŸ¥æ˜¯å¦ä½¿ç”¨æ­£ç¡®çš„ Python ç¯å¢ƒ
  4. æ¸…ç† pip ç¼“å­˜: pip cache purge

é—®é¢˜3ï¼šæƒ³è¦å›é€€åˆ°åŸç‰ˆ
è§£å†³æ–¹æ¡ˆï¼š
  pip uninstall chat-downloader -y
  pip install chat-downloader==0.2.8
  ï¼ˆæ³¨æ„ï¼šå›é€€å YouTube ä¸‹è½½å°†å†æ¬¡å¤±è´¥ï¼‰


================================================================================
ã€æ³¨æ„äº‹é¡¹ã€‘
================================================================================

1. ç›®å‰ä½¿ç”¨çš„æ˜¯éå®˜æ–¹ fork ç‰ˆæœ¬
   - ä¼˜ç‚¹ï¼šå·²ä¿®å¤ YouTube API å˜æ›´é—®é¢˜
   - ç¼ºç‚¹ï¼šå¯èƒ½ä¸ä¼šåŒæ­¥å®˜æ–¹çš„å…¶ä»–æ›´æ–°

2. å…³æ³¨åŸé¡¹ç›®åŠ¨æ€
   - å®šæœŸæ£€æŸ¥æ˜¯å¦æœ‰å®˜æ–¹ä¿®å¤ç‰ˆæœ¬å‘å¸ƒ
   - å¦‚æœå®˜æ–¹åˆå¹¶ä¿®å¤ï¼Œå»ºè®®åˆ‡æ¢å›å®˜æ–¹ç‰ˆæœ¬

3. YouTube API å¯èƒ½å†æ¬¡å˜æ›´
   - å¦‚æœæœªæ¥å†æ¬¡å‡ºç°ç±»ä¼¼é—®é¢˜
   - æ£€æŸ¥ Indigo128 fork æ˜¯å¦æœ‰æ–°çš„æ›´æ–°
   - æˆ–å…³æ³¨åŸé¡¹ç›®çš„ issues å’Œ PR

4. æ•°æ®ä½¿ç”¨å»ºè®®
   - éµå®ˆ YouTube æœåŠ¡æ¡æ¬¾
   - åˆç†ä½¿ç”¨èŠå¤©è®°å½•æ•°æ®
   - æ³¨æ„éšç§å’Œç‰ˆæƒé—®é¢˜


================================================================================
ã€æ›´æ–°è®°å½•ã€‘
================================================================================

2025-12-27
  - åˆå§‹ç‰ˆæœ¬
  - è®°å½• YouTube API å˜æ›´å¯¼è‡´çš„é—®é¢˜
  - æä¾› Indigo128 fork ä¿®å¤æ–¹æ¡ˆ
  - æµ‹è¯•éªŒè¯é€šè¿‡

================================================================================
